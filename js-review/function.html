<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>函数的应用</title>
</head>

<body>
  <script>
    // function pringArgs() {
    //   console.log(arguments);
    // }
    // pringArgs("A", 'a', 0, {
    //   foo: "Hello"
    // });

    // 匿名函数的自调用
    // (function () {
    //   alert(124);
    // })();

    // 函数作为返回值
    // function fn(b) {
    //   var a = 10;
    //   return function () {
    //     alert(a+b);
    //   }
    // }
    // fn(15)();

    // 作用域
    // var num = 123;
    // function foo() {
    //   console.log(num);
    // }
    // foo();

    // if(false) {
    //   var num = 123;
    // }
    // console.log(num);  // undefined

    // 作用域链
    // function f1() {
    //   function f2() {
    //   }
    // }
    // var num = 456;
    // function f3() {
    //   function f4() {
    //   }
    // }

    // 作用域链
    // function f1() {  // 闭包函数
    //   var num = 123;
    //   function f2() {
    //     console.log(num);
    //   }
    //   f2();
    // }
    // var num = 456;
    // f1();

    // 声明提升
    // var a = 25;
    // function abc() {
    //   alert(a); // undefined
    //   var a = 10;
    // }
    // abc();

    // 如果变量和函数同名的话，函数优先
    // console.log(a);
    // function a() {
    //   console.log("aaaaa");
    // }
    // var a = 1;
    // console.log(a);

    // 闭包
    // 计算打车价格：打车起步价13(3公里内), 之后每多一公里增加5块钱. 用户输入公里数就可以计算打车价格
    // 如果有拥堵情况，总价格多收取10块钱拥堵费
    var car = (function () {
      var start = 13; // 起步价 局部变量
      var total = 0; // 总价 局部变量
      return {
        // 正常的总价
        price: function (n) {
          if (n <= 3) {
            total = start;
          } else {
            total = start + (n - 3) * 5
          }
          return total;
        }, // 拥堵之后的费用 
        yd: function (flag) {
          return flag ? total + 10 : total;
        }
      }
    })();
    console.log(car.price(5)); // 23 
    console.log(car.yd(true)); // 33
    console.log(car.price(1)); // 13 
    console.log(car.yd(false)); // 13

    // 递归：遍历数组
    var data = [{
      id: 1,
      name: '家电',
      goods: [{
        id: 11,
        gname: '冰箱',
        goods: [{
          id: 111,
          gname: '海尔'
        }, {
          id: 112,
          gname: '美的'
        }, ]
      }, {
        id: 12,
        gname: '洗衣机'
      }]
    }, {
      id: 2,
      name: '服饰'
    }];
    // 根据id返回数据对象
    // 1. 利用 forEach 去遍历里面的每一个对象
    function getId(json, id) {
      var obj = {};
      json.forEach(function (item) {
        // console.log(item); // 2个数组元素
        if (item.id == id) {
          // console.log(item);
          obj = item;
          // 2.想要得到里层的数据 11 12 可以利用递归函数
          // 里面应该有goods这个数组并且数组的长度不为 0
        } else if (item.goods && item.goods.length > 0) {
          obj = getId(item.goods, id);
        }
      });
      return obj;
    }
    console.log(getId(data, 1));
    console.log(getId(data, 2));
    console.log(getId(data, 11));
    console.log(getId(data, 12));
    console.log(getId(data, 111));
  </script>
</body>

</html>